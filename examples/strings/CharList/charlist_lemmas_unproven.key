\rules {

       lemma_indexOfSubstring {
           \schemaVar \term CharList l;
	   \schemaVar \term jchar c;
	   \schemaVar \term int i,j,k;
	   \schemaVar \variables int iv;
	   \find (indexOf(c,i,substring(j,k,l)))
	   \varcond ( \notFreeIn(iv,l), \notFreeIn(iv,i),
	   	      \notFreeIn(iv,j), \notFreeIn(iv,k),
		      \notFreeIn (iv,c) )
	   \replacewith (\ifEx iv; (iv >= (i+j) & i>=0 & iv >= i & iv < k & charAt(iv,l) = c)
	   		 \then (iv)
			 \else (-1))
       };
}

